<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-A-Labs/lab8">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/OPS445/img/pwa/icon-512x512.png">
<link rel="manifest" href="/OPS445/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/OPS445/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/OPS445/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/OPS445/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Lab 8 | OPS445 - Open System Automation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 8 | OPS445 - Open System Automation"><meta data-rh="true" name="description" content="Lab 8 for Students to Complete and Submit"><meta data-rh="true" property="og:description" content="Lab 8 for Students to Complete and Submit"><link data-rh="true" rel="icon" href="/OPS445/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8" hreflang="x-default"><link rel="stylesheet" href="/OPS445/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/OPS445/assets/js/runtime~main.055c115f.js" as="script">
<link rel="preload" href="/OPS445/assets/js/main.76aa6622.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/OPS445/"><div class="navbar__logo"><img src="/OPS445/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/OPS445/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OPS445 - Open System Automation</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS445/">Welcome to OPS445</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS445/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/OPS445/A-Labs/lab1">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab5">Lab 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab6">Lab 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab7">Lab 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/OPS445/A-Labs/lab8">Lab 8</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab9">Lab 9</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS445/B-Assignments/assignment1">Assignments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS445/C-ExtraResources/ansible-setup">Extra Resources</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/OPS445/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 8</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 8: Configuration management</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-objectives">Lab Objectives<a class="hash-link" href="#lab-objectives" title="Direct link to heading">​</a></h2><ol><li>Review SSH setup and SSH remote shell command execution</li><li>Explore the Fabric Python library (Fabric API) and its command line tool &quot;fab&quot;.</li><li>Create Fabric scripts utilizing Fabric&#x27;s API and environment objects to define tasks for the <strong>fab</strong> command.</li><li>Use the <strong>fab</strong> command to execute fabric script to perform pre-defined tasks on remote Linux machines.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h3><ol><li>Has the user account named &quot;student&quot; and password for your VM with access port on myvmlab.senecacollege.ca</li><li>Regular account on Matrix.senecacollege.ca</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h3><p>Fabric is a Python library and command-line tool for streamlining the use of SSH for application deployment or system administration tasks. It has two major components:</p><ol><li>a command-line interface program called &quot;fab&quot; which lets you execute arbitrary Python functions on local and remote machines.</li><li>a set of Python APIs that you can use and call in your Python functions to make executing shell commands over SSH much easier.</li></ol><p>We are going to use the Fabric API to define tasks and use the <strong>fab</strong> command to execute those tasks on one or more remote Linux machines.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a class="hash-link" href="#reference" title="Direct link to heading">​</a></h3><ol><li>These links are helpful for learning more about Fabric&#x27;s features:</li></ol><table><thead><tr><th align="left"><strong>Category</strong></th><th align="left"><strong>Resource Link</strong></th></tr></thead><tbody><tr><td align="left">Official Fabric tutorial</td><td align="left"><a href="http://docs.fabfile.org/en/1.13/tutorial.html" target="_blank" rel="noopener noreferrer">[<!-- -->1<!-- -->]</a></td></tr><tr><td align="left">Better Fabric tutorial</td><td align="left"><a href="https://www.digitalocean.com/community/tutorials/how-to-use-fabric-to-automate-administration-tasks-and-deployments" target="_blank" rel="noopener noreferrer">[<!-- -->2<!-- -->]</a></td></tr><tr><td align="left">Official <strong>Fabric</strong> website</td><td align="left"><a href="http://www.fabfile.org/" target="_blank" rel="noopener noreferrer">[<!-- -->3<!-- -->]</a></td></tr></tbody></table><p><strong>Please note that the version of Fabric currently installed on matrix.senecacollege.ca 1.14.0 and it supports only Python version 2</strong>. The Fabric script files we are going to create in this lab have to meet Python version 2.x requirements. (e.g. print is a keyword, not a built-in function in Python 2.x)</p><ol start="2"><li><p>You should have some experience on the following topics in OPS245 and or OPS345. Please review them to prepare for the activities in this lab:</p><ul><li>create and configure a regular user on a Linux system.</li><li>configure and manage sudo privilege for a regular user</li><li>configure sudoers using the visudo command</li><li>using the yum command to install, remove, and update rpm packages</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-1-the-fabric-environment">Investigation 1: The Fabric Environment<a class="hash-link" href="#investigation-1-the-fabric-environment" title="Direct link to heading">​</a></h2><p>The Fabric environment consists of the following components:</p><ol><li><p>Controller workstation - the machine that has the Fabric package installed and runs the &quot;fab&quot; command</p><ol><li>the Fabric Python Library (aka the fabric api)- the fabric package (already installed on matrix)</li><li>the Fabric command <strong>- fab</strong>: runs Fabric script, name of the script is default to fabfile.py in the current working directory unless specified otherwise with the &#x27;-f&#x27; option.</li><li>Fabric script: contains fabric environment object value and Python functions (or tasks) to be executed by the <strong>fab</strong> command.</li></ol></li><li><p>Remote machine: the target machine on which one or more Fabric tasks will be executed.</p><ol><li>running the ssh server daemon</li><li>use public key (or password based) authentication for ssh connections</li></ol></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1---configure-and-test-your-controller-workstation">Part 1 - Configure and test your controller workstation<a class="hash-link" href="#part-1---configure-and-test-your-controller-workstation" title="Direct link to heading">​</a></h3><p>In this lab you will use your login account on matrix.senecacollege.ca as your Fabric controller workstation.</p><p>The Fabric package version 1.14.0 has already been installed on matrix.senecacollege.ca. You should have access to the <strong>fab</strong> command on matrix. Login to matrix.senecacollege.ca and run the following command to confirm the version of the fabric package:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Type the following command to get the command line options of the fab command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should get something similar to the following:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage: fab </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">command</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">:arg1,arg2</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">val2,host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">foo,hosts</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;h1;h2&#x27;</span><span class="token plain">,</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, --help            show this </span><span class="token builtin class-name">help</span><span class="token plain"> message and </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d NAME, --display</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        print detailed info about </span><span class="token builtin class-name">command</span><span class="token plain"> NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -F FORMAT, --list-format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">FORMAT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        formats --list, choices: short, normal, nested</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -I, --initial-password-prompt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Force password prompt up-front</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --initial-sudo-password-prompt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Force </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> password prompt up-front</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -l, --list            print list of possible commands and </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">VALUE,</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.   comma separated </span><span class="token assign-left variable" style="color:#36acaa">KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">VALUE pairs to </span><span class="token builtin class-name">set</span><span class="token plain"> Fab </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> vars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --shortlist           </span><span class="token builtin class-name">alias</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> -F short --list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -V, --version         show program</span><span class="token string" style="color:#e3116c">&#x27;s version number and exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  -a, --no_agent        don&#x27;</span><span class="token plain">t use the running SSH agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -A, --forward-agent   forward </span><span class="token builtin class-name">local</span><span class="token plain"> agent to remote end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --abort-on-prompts    abort instead of prompting </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">for password, host, etc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c </span><span class="token environment constant" style="color:#36acaa">PATH</span><span class="token plain">, --config</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        specify location of config </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> to use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --colorize-errors     Color error output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -D, --disable-known-hosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> not load user known_hosts </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e, --eagerly-disconnect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        disconnect from hosts as soon as possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f </span><span class="token environment constant" style="color:#36acaa">PATH</span><span class="token plain">, --fabfile</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        python module </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> to import, e.g. </span><span class="token string" style="color:#e3116c">&#x27;../other.py&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -g HOST, --gateway</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HOST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        gateway </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> to connect through</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --gss-auth            Use GSS-API authentication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --gss-deleg           Delegate GSS-API client credentials or not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --gss-kex             Perform GSS-API Key Exchange and user authentication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --hide</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">LEVELS         comma-separated list of output levels to hide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H HOSTS, --hosts</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HOSTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        comma-separated list of hosts to operate on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -i </span><span class="token environment constant" style="color:#36acaa">PATH</span><span class="token plain">               path to SSH private key file. May be repeated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -k, --no-keys         don</span><span class="token string" style="color:#e3116c">&#x27;t load private key files from ~/.ssh/</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --keepalive=N         enables a keepalive every N seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --linewise            print line-by-line instead of byte-by-byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  -n M, --connection-attempts=M</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        make M attempts to connect before giving up</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --no-pty              do not use pseudo-terminal in run/sudo</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  -p PASSWORD, --password=PASSWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        password for use with authentication and/or sudo</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  -P, --parallel        default to parallel execution method</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --port=PORT           SSH connection port</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  -r, --reject-unknown-hosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        reject unknown hosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --sudo-password=SUDO_PASSWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        password for use with sudo only</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --system-known-hosts=SYSTEM_KNOWN_HOSTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        load system known_hosts file before reading user</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        known_hosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  -R ROLES, --roles=ROLES</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        comma-separated list of roles to operate on</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  -s SHELL, --shell=SHELL</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        specify a new shell, defaults to &#x27;</span><span class="token plain">/bin/bash -l -c</span><span class="token string" style="color:#e3116c">&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --show=LEVELS         comma-separated list of output levels to show</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  --skip-bad-hosts      skip over hosts that can&#x27;</span><span class="token plain">t be reached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --skip-unknown-tasks  skip over unknown tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ssh-config-path</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Path to SSH config </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -t N, --timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">N     </span><span class="token builtin class-name">set</span><span class="token plain"> connection </span><span class="token function" style="color:#d73a49">timeout</span><span class="token plain"> to N seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -T N, --command-timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">N</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token builtin class-name">set</span><span class="token plain"> remote </span><span class="token builtin class-name">command</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">timeout</span><span class="token plain"> to N seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -u </span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">, --user</span><span class="token operator" style="color:#393A34">=</span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain">  username to use when connecting to remote hosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -w, --warn-only       warn, instead of abort, when commands fail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -x HOSTS, --exclude-hosts</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HOSTS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        comma-separated list of hosts to exclude</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -z INT, --pool-size</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">INT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        number of concurrent processes to use </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> parallel mode</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Please pay special attention and study the following command-line options for fab as they will be used in some of the activities in this lab:</strong></p><ol><li><strong>-H</strong></li><li><strong>-f</strong></li><li><strong>-i</strong></li><li><strong>-l</strong></li><li><strong>--port</strong></li><li><strong>--user</strong></li><li><strong>--initial-sudo-password-prompt</strong></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-connect-to-vm-in-myvmlabsenecacollegeca">Part 2: Connect to VM in myvmlab.senecacollege.ca<a class="hash-link" href="#part-2-connect-to-vm-in-myvmlabsenecacollegeca" title="Direct link to heading">​</a></h3><p>You should have received an email from ITS containing the following information:</p><ul><li>account name: (usually &#x27;student&#x27;)</li><li>password: (let&#x27;s assume it is &#x27;P@ssw0rd&#x27; for the following instruction in this lab)</li><li>port number for SSH access via myvmlab.senecacollege.ca (e.g. 7200)</li></ul><p>This VM will be used as the remote Linux machine in our Fabric environment. Login to matrix and try the following SSH command to test the connectivity between matrix and your assigned VM:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p </span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> student@myvmlab.senecacollege.ca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">student@myvmlab.senecacollege.ca&#x27;s password: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">type the password </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the student user here</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last login: Fri Jul  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token plain">:06:24 </span><span class="token number" style="color:#36acaa">2020</span><span class="token plain"> from mtrx-node05pd.dcm.senecacollege.ca</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you are on your VM, try the following commands: hostname, id, and df, and record the results for later comparison with the results of other commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">uid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">gid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">groups</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">,10</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wheel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">df</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem              1K-blocks    Used Available Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devtmpfs                   </span><span class="token number" style="color:#36acaa">878260</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">878260</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9492</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">880300</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/centos-root  </span><span class="token number" style="color:#36acaa">38680112</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1745524</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">36934588</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda2                 </span><span class="token number" style="color:#36acaa">1038336</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">331228</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">707108</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">32</span><span class="token plain">% /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1                  </span><span class="token number" style="color:#36acaa">204580</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11296</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">193284</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/centos-home  </span><span class="token number" style="color:#36acaa">18880512</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">33160</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">18847352</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /home</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">177960</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">177960</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/user/1002</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>Logout from your VM and get back to matrix.</li><li>The previous SSH command when executed successfully, created a login shell on the remote machine. If the previous SSH command is followed by a specific bash command, it will be executed on the remote host instead of creating a login shell. Consider the following:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p </span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> student@myvmlab.senecacollege.ca </span><span class="token string" style="color:#e3116c">&#x27;hostname;id;df&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">student@myvmlab.senecacollege.ca&#x27;s password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">uid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">gid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">groups</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">,10</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wheel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem              1K-blocks    Used Available Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devtmpfs                   </span><span class="token number" style="color:#36acaa">878260</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">878260</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9492</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">880300</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">889792</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/centos-root  </span><span class="token number" style="color:#36acaa">38680112</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1745608</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">36934504</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda2                 </span><span class="token number" style="color:#36acaa">1038336</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">331228</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">707108</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">32</span><span class="token plain">% /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1                  </span><span class="token number" style="color:#36acaa">204580</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11296</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">193284</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">% /boot/efi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/centos-home  </span><span class="token number" style="color:#36acaa">18880512</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">33160</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">18847352</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">% /home</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs                      </span><span class="token number" style="color:#36acaa">177960</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">177960</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">% /run/user/1002</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>The three shell commands: hostname, id, and df were executed sequentially. Compare the outputs above with the previous results when executing the corresponding commands in the login shell.</li><li>Please note that your VM was configured to ask for the user&#x27;s password for every SSH connection attemp. We are going to change that behaviour next.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-set-up-ssh-login-with-public-key-authentication">Part 3: Set up SSH login with public key authentication<a class="hash-link" href="#part-3-set-up-ssh-login-with-public-key-authentication" title="Direct link to heading">​</a></h3><p>In order for you to run multiple tasks on multiple remote machines without typing in the password for each connection, you need to configure your VM to accept SSH public key authentication in addtion to password authentication. You&#x27;ve done this in both OPS245 and OPS345, and here is a summary of how to do it between your account on matrix and your VM:</p><ol><li>Create a new SSH key pair (one private, and one public) under your account on matrix.senecacollege.ca.</li><li>Once you have both keys, you can use the <strong>ssh-copy-id</strong> command to copy your public key to the student account on your VM, replace the port number with the correct value for your VM:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id -i ~/.ssh/id_rsa.pub -p </span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> student@myvmlab.senecacollege.ca</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li><p>The above command should add the contents of your pub key to ~/.ssh/authorized_keys under your student account on your VM. <!-- -->[<strong>Note</strong>: If you want to setup another controller workstation, you can either copy the <strong>private key</strong> to it, or generate another SSH key pair, and copy the <strong>public key</strong> to the VM.<!-- -->]</p></li><li><p>Verify and confirm that your account on matrix can SSH to your VM as &#x27;student&#x27; without being prompted for a password:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p </span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> student@myvmlab.senecacollege.ca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last login: Fri Jul  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">:46:19 </span><span class="token number" style="color:#36acaa">2020</span><span class="token plain"> from mtrx-node05pd.dcm.senecacollege.ca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">logout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection to myvmlab.senecacollege.ca closed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p </span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> student@myvmlab.senecacollege.ca </span><span class="token string" style="color:#e3116c">&#x27;date;hostname;id&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Fri Jul  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">:55:22 EDT </span><span class="token number" style="color:#36acaa">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">uid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">gid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">groups</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">,10</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wheel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>If you got similar result as shown above, you have successfully configured your controller workstation and your VM to use public key authentication.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-2-running-the-fab-command-in-ad-hoc-mode">Investigation 2: Running the fab command in ad-hoc mode<a class="hash-link" href="#investigation-2-running-the-fab-command-in-ad-hoc-mode" title="Direct link to heading">​</a></h2><p>The fab command relies on SSH to make the connection to the remote machine before executing the intended commands. The fab command can run in ad-hoc mode:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -- </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">shell commands</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When running the fab command in ad-hoc mode, it is very similar to running the SSH with commands attached at the end.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-running-non-privileged-shell-commands-on-remote-machines">Part 1: running non-privileged shell commands on remote machines<a class="hash-link" href="#part-1-running-non-privileged-shell-commands-on-remote-machines" title="Direct link to heading">​</a></h3><p>In the following example, we use the <strong>fab</strong> to execute the &quot;date&quot;, &quot;hostname&quot;, and &quot;id&quot; command remotely on our VM. Try the following ad-hoc fab commands and record their results for later use, replace the port number with the correct value for your VM:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ fab --host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">myvmlab.senecacollege.ca --port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> --user</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">student -- </span><span class="token string" style="color:#e3116c">&#x27;date;hostname;id&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Executing task </span><span class="token string" style="color:#e3116c">&#x27;&lt;remainder&gt;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> run: </span><span class="token function" style="color:#d73a49">date</span><span class="token punctuation" style="color:#393A34">;</span><span class="token function" style="color:#d73a49">hostname</span><span class="token punctuation" style="color:#393A34">;</span><span class="token function" style="color:#d73a49">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: Fri Jul  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token plain">:05:39 EDT </span><span class="token number" style="color:#36acaa">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: </span><span class="token assign-left variable" style="color:#36acaa">uid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">gid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">groups</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">,10</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wheel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disconnecting from myvmlab.senecacollege.ca:7200</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that there is no password prompting if you complete &quot;Part 3&quot; successfully, otherwise, the SSH server daemon on your VM will prompt you for a password. The output from the fab&#x27;s ad-hoc mode is not much different from the SSH command with shell command attached at the end, however, please note that the additional information on the output from the fab command can be very useful for record keeping purpose - what has been done and whether the commands had been carried out successfully or not.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-running-privileged-commands-on-remote-machines">Part 2: running privileged commands on remote machines<a class="hash-link" href="#part-2-running-privileged-commands-on-remote-machines" title="Direct link to heading">​</a></h3><p><strong>WARNING: Running privileged commands incorrectly with sudo may cause irreparable damage to your remote machine.</strong></p><p>We say that running an ad-hoc fab command is very similar to the SSH command with shell commands attached at the end. Let&#x27;s try both with privileged commands, like the &quot;yum&quot; command.</p><p><strong>Run the &quot;yum&quot; command on remote machine with SSH</strong></p><ol><li>By default, your VM doesn&#x27;t have the &quot;tree&quot; rpm package installed. You can verify this with the following SSH command (remember to replace the port number with the correct value for your VM):</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p </span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> student@myvmlab.senecacollege.ca </span><span class="token string" style="color:#e3116c">&quot;yum list tree&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loading mirror speeds from cached hostfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * base: centos.mirror.colo-serv.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * extras: centos.mirror.colo-serv.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * updates: centos.mirror.ca.planethoster.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available Packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tree.x86_64                          </span><span class="token number" style="color:#36acaa">1.6</span><span class="token plain">.0-10.el7                           base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Please note that the tree package is &quot;Available&quot;, but not yet installed.</p><ol><li>Let&#x27;s try to install the &quot;tree&quot; package with the shell command &quot;yum install tree -y&quot;:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p student@myvmlab.senecacollege.ca </span><span class="token string" style="color:#e3116c">&quot;yum install tree -y&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You need to be root to perform this command.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Using the &quot;yum&quot; command to query rpm package doesn&#x27;t need special privilege, however, it does when you try to install or remove rpm packages.</li><li>Your &quot;student&quot; account on your VM was configured to allow you to run the &quot;sudo&quot; command to perform software management using the &quot;yum&quot; command. So, let&#x27;s login to your VM and try the following &quot;sudo&quot; command to install and then remove the &quot;tree&quot; rpm package:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p </span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> student@myvmlab.senecacollege.ca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last login: Fri Jul  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:51:07 </span><span class="token number" style="color:#36acaa">2020</span><span class="token plain"> from mtrx-node05pd.dcm.senecacollege.ca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> tree -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">sudo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> password </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> student:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loading mirror speeds from cached hostfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * base: less.cogeco.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * extras: centos.mirror.colo-serv.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * updates: mirror.calgah.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resolving Dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Running transaction check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Package tree.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1.6.0-10.el7 will be installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Finished Dependency Resolution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dependencies Resolved</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Package                  Arch                       Version                             Repository                Size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installing:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tree                     x86_64                     </span><span class="token number" style="color:#36acaa">1.6</span><span class="token plain">.0-10.el7                        base                      </span><span class="token number" style="color:#36acaa">46</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transaction Summary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Install  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> Package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Total download size: </span><span class="token number" style="color:#36acaa">46</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installed size: </span><span class="token number" style="color:#36acaa">87</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading packages:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tree-1.6.0-10.el7.x86_64.rpm                                                                     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">46</span><span class="token plain"> kB  00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running transaction check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running transaction </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transaction </span><span class="token builtin class-name">test</span><span class="token plain"> succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running transaction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Installing </span><span class="token builtin class-name">:</span><span class="token plain"> tree-1.6.0-10.el7.x86_64                                                                             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Verifying  </span><span class="token builtin class-name">:</span><span class="token plain"> tree-1.6.0-10.el7.x86_64                                                                             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tree.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1.6.0-10.el7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Complete</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Please note that when you run the &quot;sudo&quot; command the first time, it asks you for the user&#x27;s password (i.e. user student&#x27;s password). Let&#x27;s now remove the &quot;tree&quot; package:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ yum remove tree -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You need to be root to perform this command.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> yum remove tree -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resolving Dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Running transaction check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Package tree.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1.6.0-10.el7 will be erased</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Finished Dependency Resolution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Dependencies Resolved</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Package                  Arch                       Version                            Repository                 Size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Removing:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tree                     x86_64                     </span><span class="token number" style="color:#36acaa">1.6</span><span class="token plain">.0-10.el7                       @base                      </span><span class="token number" style="color:#36acaa">87</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transaction Summary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Remove  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> Package</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installed size: </span><span class="token number" style="color:#36acaa">87</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading packages:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running transaction check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running transaction </span><span class="token builtin class-name">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transaction </span><span class="token builtin class-name">test</span><span class="token plain"> succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running transaction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Erasing    </span><span class="token builtin class-name">:</span><span class="token plain"> tree-1.6.0-10.el7.x86_64                                                                             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Verifying  </span><span class="token builtin class-name">:</span><span class="token plain"> tree-1.6.0-10.el7.x86_64                                                                             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Removed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tree.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1.6.0-10.el7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Complete</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>The above tests confirmed that the student user is allowed to execute the sudo command to run the yum command to install and remove rpm packages. Now, let&#x27;s logout from the VM and go back to matrix. On matrix, try to run the sudo command using SSH:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">student@centos7 ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">logout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection to myvmlab.senecacollege.ca closed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> -p </span><span class="token number" style="color:#36acaa">7211</span><span class="token plain"> student@myvmlab.senecacollege.ca </span><span class="token string" style="color:#e3116c">&quot;sudo yum install tree -y&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo: no </span><span class="token function" style="color:#d73a49">tty</span><span class="token plain"> present and no askpass program specified</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>The above error indicated that you need a tty for the SSH session to prompt you for the sudo password. Please look up the ssh man page to find out the option which turn on a tty for the SSH session.</li></ol><p><strong>Run the privileged yum command on remote machine using ad-hoc fab command</strong></p><ol><li>Let&#x27;s try the corresponding ad-hoc fab command on your VM:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab --host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">myvmlab.senecacollege.ca --port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> --user</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">student -- </span><span class="token string" style="color:#e3116c">&#x27;sudo yum install tree -y&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Type in your user student&#x27;s password when prompted for &quot;sudo password&quot;, the <strong>yum install</strong> command should be executed successfully and install the <strong>tree</strong> rpm package. If the tree rpm package is already installed, you can remove it with the following ad-hoc fab command:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab --host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">myvmlab.senecacollege.ca --port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> --user</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">student -- </span><span class="token string" style="color:#e3116c">&#x27;sudo yum remove tree -y&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-3-running-the-fab-command-in-script-mode">Investigation 3: Running the fab command in script mode<a class="hash-link" href="#investigation-3-running-the-fab-command-in-script-mode" title="Direct link to heading">​</a></h2><p>From Investigation 2, we can see that running <strong>fab</strong> in ad-hoc mode is quick, straightforward, and easy. However, the rich output generated can not be easily captured and processed. If you have a need to capture and process the output generated by the commands executed on the remote machines, the solution is to run the <strong>fab</strong> command in script mode.</p><p>The first step in running the <strong>fab</strong> command in script mode is to create a fabric script file.</p><p>Let&#x27;s start with a simple fabric script file to demonstrate some basic concepts that use the API from the Fabric python library.</p><p>On matrix, cd to your lab8 directory under ops445 and create a simple fabric script file named <strong>fabfile.py</strong> (this is the default filename used by the fab command when you invoke it without the &#x27;-f&#x27; option):</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-non-privileged-task-example">Part 1: Non-privileged task example<a class="hash-link" href="#part-1-non-privileged-task-example" title="Direct link to heading">​</a></h3><p><strong>Create non-privileged tasks: Getting the hostname of remote machines</strong></p><ol><li>Add the following contents to the default fabric script called &quot;fabfile.py&quot; in your lab8 directory:</li></ol><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> fabric</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">api </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set the name of the user login to the remote host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;student&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Define the task to get the hostname of remote machines:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getHostname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hostname&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;The host name is:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>To check for syntax error in the fabric script, run the following command in the lab8 directory where it contains the fabric script named &quot;fabfile.py&quot;:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>You should get a list of tasks defined in your fabfile.py:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ fab -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getHostname</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>To perform the task of getHostname on your VM (replace with the actual port # for connecting to your VM), run the fab command on matrix:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ fab --hosts</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">myvmlab.senecacollege.ca --port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">7200</span><span class="token plain"> getHostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Executing task </span><span class="token string" style="color:#e3116c">&#x27;getHostname&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> run: </span><span class="token function" style="color:#d73a49">hostname</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> name is: centos7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disconnecting from myvmlab.senecacollege.ca:7200</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>Notice that there is no need to specify the user name at the <strong>fab</strong> command line since we defined it in the fabric script file (env.user = &#x27;student&#x27;). Also notice that we can capture the hostname returned from the &quot;hostname&quot; command and print it out together with a descriptive text in a line.</li><li>In the above executed <strong>fab</strong> command, the fab program imports the fabric script named &quot;fabfile.py&quot; and execute the getHostname function on the VM connect at port 7200 on myvmlab.senecacollege.ca. Note that the port number for your VM will likely have a different value.</li></ol><p>If you did all the setup right and you got a password prompt when executing the above command, read the prompt carefully and see who&#x27;s password it was prompting you for. If it is not for the user student, verify that you have the following line in your fabfile.py and you can ssh to your VM as the user student without password:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">env.user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;student&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above output from the <strong>fab</strong> command, you have:</p><ul><li>Lines with the FQDN of the remote machine you are working on.</li><li>Messages from the controller workstation (e.g. &quot;Executing task...&quot;, and &quot;run: ...&quot;).</li><li>Output from the remote machine (&quot;out: ...&quot;)</li><li>Output generated on the controller workstation from your fab file (the print statement)</li></ul><p>You should get used to the above messages from the <strong>fab</strong> command. It&#x27;s a lot of output but it&#x27;s important to understand where each piece of information is coming from, so you are able to debug problems when they happen.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-privileged-tasks-examples">Part 2: Privileged Tasks Examples<a class="hash-link" href="#part-2-privileged-tasks-examples" title="Direct link to heading">​</a></h3><p><strong>Create privileged tasks: install and remove rpm package on remote machines</strong></p><ol><li>Add the following two new functions to the end of the fabric script &quot;fabfile.py&quot; in your lab8 directory:</li></ol><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">installPackage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pkg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;dummy&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cmd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;yum install &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> pkg </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27; -y&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sudo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cmd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">removePackage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pkg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> pkg </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       cmd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;yum remove dummy -y&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       cmd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;yum remove &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> pkg </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27; -y&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sudo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cmd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Note that both functions take one function argument in different ways. However, if no function argument is passed when calling the function, both will default to a string value of &quot;dummy&quot;. Both functions call the sudo() from the fabric.api to execute the command contained in the &quot;cmd&quot; object on the remote machine via sudo.</li><li>To check for any syntax error in your updated fabric script, run the following command in the same directory as the fabfile.py:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>You should get a list of tasks defined similar to the following:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ fab -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getHostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    installPackage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    removePackage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>If you only need to connect to the same remote machine, you can specify the host and port number in the fabfile.py to save some typing when executing the fab command. Add the following two lines after the env.user line in your fabfile.py:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">env.port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;7200&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- please replace with the actual value of your VM&#x27;s port number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">env.hosts </span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;myvmlab.senecacollege.ca&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>You can also store the user&#x27;s password in this file so that it will respond to the &quot;sudo password&quot; prompt for sudo() call. It is not safe to do so as you can configure the sudo module on the remote machine not to ask for sudo password.</li><li>Now you can run the fab command without the &quot;--host&quot; and &quot;--port&quot; options.</li><li>Run the following two fab commands, note the results and compare their difference:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab installPackage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fab installPackage:tree</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="9"><li>Run the following two fab commands, note the results and compare their difference:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab removePackage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fab removePackage:tree</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-create-remote-task-for-updating-rpm-packages">Part 3: Create remote task for updating rpm packages<a class="hash-link" href="#part-3-create-remote-task-for-updating-rpm-packages" title="Direct link to heading">​</a></h3><p>Add a new function called &quot;updatePackage&quot; to your fabfile.py according to the following requirements:</p><ul><li>Accept optional function argument as the rpm package name</li><li>If no function argument was given when called, default to all the packages installed</li></ul><p>The output of the updatePackage when executed, should produce similar output as shown below:</p><ol><li>Update a single package:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab updatePackage:tree</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Sample output:</strong></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ fab updatePackage:tree</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Executing task </span><span class="token string" style="color:#e3116c">&#x27;updatePackage&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> sudo: yum update tree -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: Loading mirror speeds from cached hostfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:  * base: less.cogeco.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:  * extras: centos.mirror.ca.planethoster.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:  * updates: less.cogeco.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: No packages marked </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Loading mirror speeds from cached hostfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * base: less.cogeco.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * extras: centos.mirror.ca.planethoster.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * updates: less.cogeco.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No packages marked </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disconnecting from myvmlab.senecacollege.ca:7200</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Update all installed package:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fab updatePackage:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The following output had been trimmed, only showing the first few lines:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Executing task </span><span class="token string" style="color:#e3116c">&#x27;updatePackage&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> sudo: yum update -y --skip-broken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out: Loading mirror speeds from cached hostfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:  * base: less.cogeco.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:  * extras: centos.mirror.ca.planethoster.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">myvmlab.senecacollege.ca</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> out:  * updates: less.cogeco.net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Verifying  </span><span class="token builtin class-name">:</span><span class="token plain"> systemd-219-73.el7_8.5.x86_64                                                                      </span><span class="token number" style="color:#36acaa">53</span><span class="token plain">/54</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Verifying  </span><span class="token builtin class-name">:</span><span class="token plain"> systemd-libs-219-73.el7_8.5.x86_64                                                                 </span><span class="token number" style="color:#36acaa">54</span><span class="token plain">/54</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Removed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kernel.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3.10.0-862.el7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Installed:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kernel.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3.10.0-1127.13.1.el7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Updated:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bind-export-libs.x86_64 </span><span class="token number" style="color:#36acaa">32</span><span class="token plain">:9.11.4-16.P2.el7_8.6          binutils.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:2.27-43.base.el7_8.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ca-certificates.noarch </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:2020.2.41-70.0.el7_8            device-mapper.x86_64 </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">:1.02.164-7.el7_8.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  device-mapper-event.x86_64 </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">:1.02.164-7.el7_8.2          device-mapper-event-libs.x86_64 </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">:1.02.164-7.el7_8.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  device-mapper-libs.x86_64 </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">:1.02.164-7.el7_8.2           kernel-tools.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3.10.0-1127.13.1.el7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kernel-tools-libs.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3.10.0-1127.13.1.el7          lvm2.x86_64 </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">:2.02.186-7.el7_8.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lvm2-libs.x86_64 </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">:2.02.186-7.el7_8.2                    microcode_ctl.x86_64 </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">:2.1-61.10.el7_8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net-snmp.x86_64 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:5.7.2-48.el7_8.1                       net-snmp-agent-libs.x86_64 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:5.7.2-48.el7_8.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  net-snmp-libs.x86_64 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:5.7.2-48.el7_8.1                  net-snmp-utils.x86_64 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:5.7.2-48.el7_8.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ntp.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:4.2.6p5-29.el7.centos.2                     ntpdate.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:4.2.6p5-29.el7.centos.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  python-perf.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3.10.0-1127.13.1.el7                rsyslog.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:8.24.0-52.el7_8.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selinux-policy.noarch </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3.13.1-266.el7_8.1               selinux-policy-targeted.noarch </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:3.13.1-266.el7_8.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  systemd.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:219-73.el7_8.8                          systemd-libs.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:219-73.el7_8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  systemd-sysv.x86_64 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:219-73.el7_8.8                     yum-plugin-fastestmirror.noarch </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:1.1.31-54.el7_8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Complete</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Disconnecting from myvmlab.senecacollege.ca:7200</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. done.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node05pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-exercise-create-a-fabric-task-called-makeuser">Lab Exercise: Create a Fabric task called makeUser()<a class="hash-link" href="#lab-exercise-create-a-fabric-task-called-makeuser" title="Direct link to heading">​</a></h2><ol><li><p>Study the Fabric API run(), sudo(), local(), and put() and utilize them to create a new Fabric task called makeUser()</p></li><li><p>The makeUser() task should perform the following on a remote machine to:</p><ul><li>create a new user called &quot;ops445p&quot; with home directory &quot;/home/ops445p&quot;.</li><li>add the new user to the sudo group called &quot;wheel&quot;.</li><li>from your instructor, get the ssh public key which is posted on the BB to your controller workstation.</li><li>add the ssh public key obtained from your instructor to the file named &quot;authorized_keys&quot; in the ~ops445p/.ssh directory on the remote machine. (Note: Make sure that you set the proper ownership and permissions on both the directory ~ops445p/.ssh (700) and the file &quot;~ops445p/.ssh/authorized_keys (600))</li></ul></li><li><p>Add the makeUser() to your final version of fabfile.py.</p></li><li><p>Run the new task makeUser() on your VM.</p></li><li><p>Verify and confirm that your new makeUser() task is working correctly.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-8-sign-off-show-instructor">Lab 8 Sign-Off (SHOW INSTRUCTOR)<a class="hash-link" href="#lab-8-sign-off-show-instructor" title="Direct link to heading">​</a></h2><p>Complete each part of the lab and upload the version of your <strong>fabfile.py</strong> to Blackboard by the due date.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/OPS445/tree/main/docs/A-Labs/lab8.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/OPS445/A-Labs/lab7"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 7</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/OPS445/A-Labs/lab9"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 9</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lab-objectives" class="table-of-contents__link toc-highlight">Lab Objectives</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></li><li><a href="#investigation-1-the-fabric-environment" class="table-of-contents__link toc-highlight">Investigation 1: The Fabric Environment</a><ul><li><a href="#part-1---configure-and-test-your-controller-workstation" class="table-of-contents__link toc-highlight">Part 1 - Configure and test your controller workstation</a></li><li><a href="#part-2-connect-to-vm-in-myvmlabsenecacollegeca" class="table-of-contents__link toc-highlight">Part 2: Connect to VM in myvmlab.senecacollege.ca</a></li><li><a href="#part-3-set-up-ssh-login-with-public-key-authentication" class="table-of-contents__link toc-highlight">Part 3: Set up SSH login with public key authentication</a></li></ul></li><li><a href="#investigation-2-running-the-fab-command-in-ad-hoc-mode" class="table-of-contents__link toc-highlight">Investigation 2: Running the fab command in ad-hoc mode</a><ul><li><a href="#part-1-running-non-privileged-shell-commands-on-remote-machines" class="table-of-contents__link toc-highlight">Part 1: running non-privileged shell commands on remote machines</a></li><li><a href="#part-2-running-privileged-commands-on-remote-machines" class="table-of-contents__link toc-highlight">Part 2: running privileged commands on remote machines</a></li></ul></li><li><a href="#investigation-3-running-the-fab-command-in-script-mode" class="table-of-contents__link toc-highlight">Investigation 3: Running the fab command in script mode</a><ul><li><a href="#part-1-non-privileged-task-example" class="table-of-contents__link toc-highlight">Part 1: Non-privileged task example</a></li><li><a href="#part-2-privileged-tasks-examples" class="table-of-contents__link toc-highlight">Part 2: Privileged Tasks Examples</a></li><li><a href="#part-3-create-remote-task-for-updating-rpm-packages" class="table-of-contents__link toc-highlight">Part 3: Create remote task for updating rpm packages</a></li></ul></li><li><a href="#lab-exercise-create-a-fabric-task-called-makeuser" class="table-of-contents__link toc-highlight">Lab Exercise: Create a Fabric task called makeUser()</a></li><li><a href="#lab-8-sign-off-show-instructor" class="table-of-contents__link toc-highlight">Lab 8 Sign-Off (SHOW INSTRUCTOR)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">OPS445 - Open System Automation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/OPS445/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/OPS445/assets/js/runtime~main.055c115f.js"></script>
<script src="/OPS445/assets/js/main.76aa6622.js"></script>
</body>
</html>