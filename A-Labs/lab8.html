<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-A-Labs/lab8">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/OPS445/img/pwa/icon-512x512.png">
<link rel="manifest" href="/OPS445/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/OPS445/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/OPS445/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/OPS445/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Lab 8 | OPS445 - Open System Automation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 8 | OPS445 - Open System Automation"><meta data-rh="true" name="description" content="Lab 8 for Students to Complete and Submit"><meta data-rh="true" property="og:description" content="Lab 8 for Students to Complete and Submit"><link data-rh="true" rel="icon" href="/OPS445/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS445/A-Labs/lab8" hreflang="x-default"><link rel="stylesheet" href="/OPS445/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/OPS445/assets/js/runtime~main.6aca4582.js" as="script">
<link rel="preload" href="/OPS445/assets/js/main.6067282e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/OPS445/"><div class="navbar__logo"><img src="/OPS445/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/OPS445/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OPS445 - Open System Automation</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS445/">Welcome to OPS445</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS445/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/OPS445/A-Labs/lab1">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab5">Lab 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab6">Lab 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS445/A-Labs/lab7">Lab 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/OPS445/A-Labs/lab8">Lab 8</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS445/B-Assignments/assignment1">Assignments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS445/C-ExtraResources/ansible-setup">Extra Resources</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/OPS445/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 8</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 8: Ansible</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="objective">Objective<a class="hash-link" href="#objective" title="Direct link to heading">​</a></h2><ol><li>Confirm and review the Ansible package installed on matrix.senecapolytechnic.ca</li><li>Explore and run Ansible&#x27;s ad hoc commands</li><li>Explore and study a few Ansible&#x27;s modules</li><li>Explore, create, and run a few Ansible playbooks</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p>Ansible is an agentless IT automation engine for automating cloud provisioning, configuration management, application deployment, intra-service orchestration, and many other IT system administration tasks.</p><p>Ansible uses no additional custom security infrastructure, and it uses a very simple human readable language called &#x27;YAML&#x27;, to compose an Ansible Playbook which allows you to describe the tasks you want to automate.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a class="hash-link" href="#reference" title="Direct link to heading">​</a></h2><ul><li>For more detail information about ansible, check out the ansible web site at <a href="http://www.ansible.com" target="_blank" rel="noopener noreferrer">www.ansible.com</a></li><li><a href="https://www.ansible.com/overview/how-ansible-works" target="_blank" rel="noopener noreferrer">Overview on how ansible works</a></li><li><a href="https://docs.ansible.com/ansible/latest/user_guide/index.html" target="_blank" rel="noopener noreferrer">Ansible Latest User Guide</a></li><li><a href="https://www.redhat.com/en/blog/system-administrators-guide-getting-started-ansible-fast" target="_blank" rel="noopener noreferrer">A System Administrator&#x27;s guide to getting started with Ansible</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-requirements">System requirements<a class="hash-link" href="#system-requirements" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> - control machine Install Ansible on your Linux VM or use the Matrix server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> - managed machine(s) (your vm in myvmlab.senecapolytechnic) - to be managed by the control machine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>You should be able to ssh from your control machine as a regular user to your managed machine without supplying a login password.</li><li>Your account on your managed machine is a sudoer and can run sudo with/without password.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-1-the-ansible-package">Investigation 1: The Ansible Package<a class="hash-link" href="#investigation-1-the-ansible-package" title="Direct link to heading">​</a></h2><p>In this investigation, we explore the main components of the Ansible configuration management system and its operating environment. We also study a simple playbook for managing the configuration of a CentOS 7.x VM.</p><p>You need at least two Linux systems for this lab: your control machine and your assigned VM in myvmlab.senecapolytechnic.ca as the managed machine. The Ansible package is already installed on matrix for you.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="important">Important:<a class="hash-link" href="#important" title="Direct link to heading">​</a></h3><p>If you decide to use Matrix for this lab, please note that you may get an Ansible error related to locale. In that case, check your <code>.bashrc</code> file. Please comment out the following lines:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export LC_ALL=C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export LC_COLLATE=C</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you comment out these lines (by placing a # symbol in front of them), run <code>source ~/.bashrc</code> and try again.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-concepts-when-using-ansible">Key Concepts when using Ansible<a class="hash-link" href="#key-concepts-when-using-ansible" title="Direct link to heading">​</a></h3><ul><li><p>YAML - a human-readable data serialization language used by Ansible&#x27;s playbooks. To know more, your can check out the <a href="https://en.wikipedia.org/wiki/YAML" target="_blank" rel="noopener noreferrer">wikipedia page here</a> or a simple introduction <a href="/OPS445/C-ExtraResources/introduction-to-yaml">here</a></p></li><li><p>Control machine - the host on which you use Ansible to execute tasks on the managed machines</p></li><li><p>Managed machine - a host that is configured by the control machine</p></li><li><p><a href="/OPS445/C-ExtraResources/sample-ansible-hosts">Hosts file</a> - contains information about machines to be managed - click <a href="/OPS445/C-ExtraResources/sample-ansible-hosts">here</a> for sample hosts file</p></li><li><p>Idempotency - is an operation that, if applied twice to any value, gives the same result as if it were applied once.</p></li><li><p>Ad hoc commands - a simple one-off task:</p><ul><li><p><strong>shell commands</strong></p><ul><li>ansible remote_machine_id <!-- -->[<!-- -->-i inventory<!-- -->]<!-- --> <!-- -->[<!-- -->--private-key id<!-- -->_<!-- -->rsa<!-- -->]<!-- --> <!-- -->[<!-- -->-u remote_user<!-- -->]<!-- --> -a &#x27;date&#x27;</li></ul></li></ul></li><li><p>Ansible modules - code that performs a particular task such as copy a file, installing a package, etc:</p><ul><li><p><strong>copy module</strong></p><ul><li>ansible remote_machine_id -m copy -a &quot;src=/ops445/ansible.txt dest=/tmp/ansible.txt&quot;</li></ul></li><li><p><strong>Package management</strong></p><ul><li>ansible remote_machine_id -m yum -a &quot;name=epel-release state=latest&quot;</li></ul></li></ul></li><li><p>Playbooks - contains one or multiple plays, each play defines a set of repeatable tasks on one or more managed machines. Playbooks are written in YAML. Every play in the playbook is created with environment-specific parameters for the target machines:</p><ul><li>ansible-playbook remote<!-- -->_<!-- -->machine<!-- -->_<!-- -->id <!-- -->[<!-- -->-i inventory<!-- -->]<!-- --> setup_webserver.yaml</li><li>ansible-playbook remote<!-- -->_<!-- -->machine<!-- -->_<!-- -->id <!-- -->[<!-- -->-i inventory<!-- -->]<!-- --> firstrun.yaml</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-the-ansible-package-installed-on-matrix">Part 1: The Ansible package installed on matrix<a class="hash-link" href="#part-1-the-ansible-package-installed-on-matrix" title="Direct link to heading">​</a></h3><p>You only need to have the &quot;ansible&quot; package on your control VM (i.e. matrix).</p><ul><li>Login to matrix with your Seneca account and change to the directory ~/ops445/lab8</li><li>Issue the following command to check the version of the &quot;ansible&quot; package:</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rpm</span><span class="token plain"> -q ansible</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To confirm that you have access to the Ansible package, try the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage: ansible </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-h</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--version</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--become-method BECOME_METHOD</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--become-user BECOME_USER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-K</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-i INVENTORY</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--list-hosts</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-l SUBSET</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-P POLL_INTERVAL</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-B </span><span class="token environment constant" style="color:#36acaa">SECONDS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-o</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-t TREE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-k</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--private-key PRIVATE_KEY_FILE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-u REMOTE_USER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-c CONNECTION</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-T TIMEOUT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--ssh-common-args SSH_COMMON_ARGS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--sftp-extra-args SFTP_EXTRA_ARGS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--scp-extra-args SCP_EXTRA_ARGS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--ssh-extra-args SSH_EXTRA_ARGS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-C</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--syntax-check</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-D</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-e EXTRA_VARS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--vault-id VAULT_IDS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--ask-vault-pass </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> --vault-password-file VAULT_PASSWORD_FILES</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-f FORKS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-M MODULE_PATH</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--playbook-dir BASEDIR</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-a MODULE_ARGS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">-m MODULE_NAME</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Take a look of all the available command line options for the &quot;ansible&quot; command. There are a lots of options when running Ansible. Let&#x27;s move on to try a few simple ones.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-sample-runs-for-some-of-the-ad-hoc-commands">Part 2: Sample runs for some of the Ad hoc commands<a class="hash-link" href="#part-2-sample-runs-for-some-of-the-ad-hoc-commands" title="Direct link to heading">​</a></h3><p>The following commands are based on the following entries in the ansible inventory file called &quot;hosts&quot; in the current working directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ops445</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab   </span><span class="token assign-left variable" style="color:#36acaa">ansible_host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">myvmlab.senecapolytechnic.ca </span><span class="token assign-left variable" style="color:#36acaa">ansible_port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">7890</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myvm    </span><span class="token assign-left variable" style="color:#36acaa">ansible_host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">myvmlab.senecapolytechnic.ca </span><span class="token assign-left variable" style="color:#36acaa">ansible_port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">7654</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible vmlab -i hosts --private-key ~/.ssh/id_rsa -u instructor -m copy -a </span><span class="token string" style="color:#e3116c">&quot;src=/home/raymond.chan/ops445/lab8/hosts dest=/tmp/ansible_hosts&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> CHANGED </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/python&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;checksum&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bc4ffa4127e3af3228e61f0ddc4fca87c5e548a4&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dest&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/tmp/ansible_hosts&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;gid&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1003</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;group&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;instructor&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;md5sum&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;17e94f6ee9ce0920ebf835bd4f6250a7&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;mode&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0664&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;owner&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;instructor&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;size&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">423</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;src&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/home/instructor/.ansible/tmp/ansible-tmp-1616732233.49-236519-35150082693243/source&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;file&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;uid&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1003</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>vmlab</strong> is the remote machine ID.</p><p><strong>hosts</strong> is the name of the ansible inventory file in the current working directory, you may also specify the inventory file with full path name, e.g. /home/raymond.chan/ops445/lab8/hosts.</p><p><strong>--private-key id<!-- -->_<!-- -->rsa</strong> is the private key for ssh key-based authentication for connecting to the remote machine.</p><p><strong>-u</strong> is for specifying the user account to be used to login to the remote machine.</p><p><strong>-m copy</strong> is to tell ansible to use the &quot;copy&quot; module.</p><p>after <strong>-a</strong> is the arguments to the copy module, which specify the source file and the destination for the copy action.</p><p>If you got the same &quot;SUCCESS&quot; message, login to the remote machine and check the directory &quot;/tmp&quot; for the file ansible_hosts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-sample-runs-for-using-some-ansibles-modules">Part 3: Sample runs for using some Ansible&#x27;s modules<a class="hash-link" href="#part-3-sample-runs-for-using-some-ansibles-modules" title="Direct link to heading">​</a></h3><p>You can get a complete list of all the ansible modules installed on you system with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ansible-doc --list_files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&quot;yum&quot; is a stable ansible module. You can get the detail information about any ansible module with the ansible-doc, try the following commands to see the documentation and examples for using the copy and yum modules:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ansible-doc copy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ansible-doc yum</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following command demonstrates how to install the &quot;epel-release&quot; package with the &quot;yum&quot; module with different module arguments and under different remote user (your result may be differ from what is show below):</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible vmlab -i hosts --private-key ~/.ssh/id_rsa -u instructor -m yum -a </span><span class="token string" style="color:#e3116c">&quot;name=epel-release state=present&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> FAILED</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/python&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changes&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;installed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;epel-release&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;You need to be root to perform this command.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;rc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;results&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;Loaded plugins: fastestmirror</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add the &#x27;-b&#x27; option to tell ansible to invoke &quot;sudo&quot; when running the yum command on the remote machine:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible vmlab -i hosts --private-key ~/.ssh/id_rsa -u instructor -b -m yum -a </span><span class="token string" style="color:#e3116c">&quot;name=epel-release state=present&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> CHANGED </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/python&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changes&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;installed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;epel-release&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;rc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;results&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;Loaded plugins: fastestmirror</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Loading mirror speeds from cached hostfile</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> * base: mirror.netflash.net</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> * extras: mirror.netflash.net</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> * updates: mirror.calgah.com</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Resolving Dependencies</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">--&gt; Running transaction check</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">---&gt; Package epel-release.noarch 0:7-11 will be installed</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">--&gt; Finished Dependency Resolution</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Dependencies Resolved</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">================================================================================</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> Package                Arch             Version         Repository        Size</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">================================================================================</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Installing:</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> epel-release           noarch           7-11            extras            15 k</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Transaction Summary</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">================================================================================</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Install  1 Package</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Total download size: 15 k</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Installed size: 24 k</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Downloading packages:</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Running transaction check</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Running transaction test</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Transaction test succeeded</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Running transaction</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">  Installing : epel-release-7-11.noarch                                     1/1 </span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">  Verifying  : epel-release-7-11.noarch                                     1/1 </span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Installed:</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">  epel-release.noarch 0:7-11                                                    </span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Complete!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you run the same command the 2nd time:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible vmlab -i hosts --private-key ~/.ssh/id_rsa -u instructor -b -m yum -a </span><span class="token string" style="color:#e3116c">&quot;name=epel-release state=present&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> SUCCESS </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/python&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;rc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;results&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;epel-release-7-11.noarch providing epel-release is already installed&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now run the similar command but with &quot;state=latest&quot;:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible vmlab -i hosts --private-key ~/.ssh/id_rsa -u instructor -b -m yum -a </span><span class="token string" style="color:#e3116c">&quot;name=epel-release state=latest&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> SUCCESS </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/python&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changes&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;installed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;updated&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;rc&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;results&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;All packages providing epel-release are up to date&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Depending on the status of the packages installed on your VM, the output may not exactly the same as shown above. Please read and try to understanding the meaning of the text return by ansible. If it&#x27;s been updated instead, then run the command again.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-4-gather-software-and-hardware-information-available-on-remote-machine">Part 4: Gather software and hardware information available on remote machine<a class="hash-link" href="#part-4-gather-software-and-hardware-information-available-on-remote-machine" title="Direct link to heading">​</a></h3><p>One of the core ansible module is called &quot;setup&quot;, it is automatically called by ansible playbook to gather useful &quot;facts&quot; about remote hosts that can be used in ansible playbooks. It can also be executed directly by the ansible command (/usr/bin/ansible) to check out what &quot;facts&quot; are available on a remote host.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible vmlab -i hosts --private-key ~/.ssh/id_rsa -u instructor -m setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> SUCCESS </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ansible_facts&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_all_ipv4_addresses&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;10.102.114.140&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_all_ipv6_addresses&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;fe80::21d:d8ff:feb7:20cc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_apparmor&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;disabled&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_architecture&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;x86_64&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_bios_date&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;11/26/2012&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_userspace_bits&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;64&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_virtualization_role&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;guest&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ansible_virtualization_type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;VirtualPC&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;discovered_interpreter_python&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/python&quot;</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;gather_subset&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;all&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;module_setup&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;changed&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="/OPS445/C-ExtraResources/ansible-setup">Click here for complete sample contents of the above</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-2-ansible-playbook">Investigation 2: Ansible Playbook<a class="hash-link" href="#investigation-2-ansible-playbook" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-playbook">What is a playbook?<a class="hash-link" href="#what-is-a-playbook" title="Direct link to heading">​</a></h3><ul><li>Playbook is one of the core features of Ansible.</li><li>Playbook tells Ansible what to execute by which user on the remote machine.</li><li>Playbook is like a to-do list for Ansible</li><li>Playbook is written in &quot;YAML&quot;.</li><li>Playbook links a task to an ansible module and provide needed arguments to the module which requires them.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-a-playbook-to-update-the-etcmotd-file">Part 1: A playbook to update the /etc/motd file<a class="hash-link" href="#part-1-a-playbook-to-update-the-etcmotd-file" title="Direct link to heading">​</a></h3><p>Name: motd-play.yml</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> motd-play.yml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: update motd </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hosts: vmlab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user: instructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vars:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apache_version: </span><span class="token number" style="color:#36acaa">2.6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    motd_warning: </span><span class="token string" style="color:#e3116c">&quot;WARNING: used by ICT faculty/students only.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testserver: </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tasks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: setup a MOTD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      copy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dest: /etc/motd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        content: </span><span class="token string" style="color:#e3116c">&quot;{{ motd_warning }}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Sample Run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">raymond.chan@mtrx-node02pd lab8</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible-playbook -i hosts -b motd-play.yml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLAY </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">update motd file</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> *******************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TASK </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Gathering Facts</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ********************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ok: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vmlab</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TASK </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">setup a MOTD</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ***********************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changed: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vmlab</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLAY RECAP ********************************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab   </span><span class="token assign-left variable" style="color:#36acaa">ok</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">changed</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">unreachable</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">failed</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">skipped</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">rescued</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">ignored</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">   </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Try to run it the 2nd time and pay attention to the result. What conclusion can you draw?</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-a-playbook-to-install-and-start-apache-server">Part 2: A playbook to install and start Apache Server<a class="hash-link" href="#part-2-a-playbook-to-install-and-start-apache-server" title="Direct link to heading">​</a></h3><p>Name: httpd-play.yml</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- hosts: vmlab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user: instructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  become: </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vars:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apache_version: </span><span class="token number" style="color:#36acaa">2.6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    motd_warning: </span><span class="token string" style="color:#e3116c">&quot;WARNING: used by ICT faculty/students only.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testserver: </span><span class="token function" style="color:#d73a49">yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tasks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> apache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      action: yum </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">httpd </span><span class="token assign-left variable" style="color:#36acaa">state</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: restart apache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      service: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: httpd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        state: restarted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Sample Run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">rchan@centos7 playbooks</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ ansible-playbook -i hosts httpd-play.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLAY </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vmlab</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ********************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TASK </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Gathering Facts</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> **********************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ok: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vmlab</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TASK </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">install apache</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ***********************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changed: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vmlab</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TASK </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">restart apache</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ***********************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changed: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">vmlab</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PLAY RECAP **********************************************************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vmlab </span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">ok</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">changed</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">unreachable</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">failed</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">skipped</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">rescued</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">ignored</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-3-using-playbook-to-configure-an-ops445-linux-vm-machine">Investigation 3: Using Playbook to configure an OPS445 Linux VM machine<a class="hash-link" href="#investigation-3-using-playbook-to-configure-an-ops445-linux-vm-machine" title="Direct link to heading">​</a></h2><p>Assume you have just installed the latest version of CentOS 7.x on a VM with GNOME Desktop. You need to configure it so that you can use it for doing the Labs for OPS445.</p><p>Study the documentation and examples of following ansible modules:</p><ul><li>copy</li><li>file</li><li>hostname</li><li>template</li><li>user</li><li>yum</li></ul><p>Create an ansible playbook named &quot;config_ops445.yml&quot; using the appropriate modules to perform the following configuration tasks on your assigned VM:</p><ul><li>update Apache (httpd) installed in the Investigation 2 - Part 2</li><li>install extra packages repository for enterprise Linux (EPEL) if it is not already installed</li><li>remove &#x27;tree&#x27; package</li><li>set the hostname to your Seneca username (Seneca ID)</li><li>create a new user with your Seneca_ID with sudo access</li><li>configure the new user account you created above so that you can ssh to it without password</li><li>setup a directory structure <strong>using a loop</strong> for completing and organizing labs as shown below:
</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /home/</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">seneca_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">/ops445/lab8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>when it&#x27;s ready, run your playbook</li><li>in order to test it, log into the VM with the newly created user (your Seneca_ID), install the &#x27;tree&#x27; package with sudo, and check the directory structure with the &#x27;tree&#x27; command</li><li>if everything is correct, capture its output for a successful run of your playbook to a file named &quot;lab8<!-- -->_<!-- -->[<!-- -->seneca<!-- -->_<!-- -->id<!-- -->]<!-- -->.txt&quot;</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-8-sign-off-show-instructor">Lab 8 Sign-off (Show Instructor)<a class="hash-link" href="#lab-8-sign-off-show-instructor" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="have-the-following-items-ready-to-show-your-instructor">Have the following items ready to show your instructor:<a class="hash-link" href="#have-the-following-items-ready-to-show-your-instructor" title="Direct link to heading">​</a></h3><ul><li>The updated inventory file called &quot;hosts&quot; which you used to access your VM.</li><li>The Ansible playbook called &quot;config<!-- -->_<!-- -->ops445.yml&quot; for configuring the VM.</li><li>The result of running the playbook &quot;config<!-- -->_<!-- -->ops445.yml&quot;. Save the result in a file called &quot;lab8<!-- -->_<!-- -->[<!-- -->seneca<!-- -->_<!-- -->id<!-- -->]<!-- -->.txt&quot;</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upload-the-following-files-to-blackboard">Upload the following files to blackboard<a class="hash-link" href="#upload-the-following-files-to-blackboard" title="Direct link to heading">​</a></h3><ul><li>hosts</li><li>config<!-- -->_<!-- -->ops445.yml</li><li>lab8<!-- -->_<!-- -->[<!-- -->seneca<!-- -->_<!-- -->id<!-- -->]<!-- -->.txt</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/OPS445/tree/main/docs/A-Labs/lab8.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/OPS445/A-Labs/lab7"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 7</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/OPS445/B-Assignments/assignment1"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Assignment 1 Home Page</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objective" class="table-of-contents__link toc-highlight">Objective</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li><li><a href="#system-requirements" class="table-of-contents__link toc-highlight">System requirements</a></li><li><a href="#investigation-1-the-ansible-package" class="table-of-contents__link toc-highlight">Investigation 1: The Ansible Package</a><ul><li><a href="#important" class="table-of-contents__link toc-highlight">Important:</a></li><li><a href="#key-concepts-when-using-ansible" class="table-of-contents__link toc-highlight">Key Concepts when using Ansible</a></li><li><a href="#part-1-the-ansible-package-installed-on-matrix" class="table-of-contents__link toc-highlight">Part 1: The Ansible package installed on matrix</a></li><li><a href="#part-2-sample-runs-for-some-of-the-ad-hoc-commands" class="table-of-contents__link toc-highlight">Part 2: Sample runs for some of the Ad hoc commands</a></li><li><a href="#part-3-sample-runs-for-using-some-ansibles-modules" class="table-of-contents__link toc-highlight">Part 3: Sample runs for using some Ansible&#39;s modules</a></li><li><a href="#part-4-gather-software-and-hardware-information-available-on-remote-machine" class="table-of-contents__link toc-highlight">Part 4: Gather software and hardware information available on remote machine</a></li></ul></li><li><a href="#investigation-2-ansible-playbook" class="table-of-contents__link toc-highlight">Investigation 2: Ansible Playbook</a><ul><li><a href="#what-is-a-playbook" class="table-of-contents__link toc-highlight">What is a playbook?</a></li><li><a href="#part-1-a-playbook-to-update-the-etcmotd-file" class="table-of-contents__link toc-highlight">Part 1: A playbook to update the /etc/motd file</a></li><li><a href="#part-2-a-playbook-to-install-and-start-apache-server" class="table-of-contents__link toc-highlight">Part 2: A playbook to install and start Apache Server</a></li></ul></li><li><a href="#investigation-3-using-playbook-to-configure-an-ops445-linux-vm-machine" class="table-of-contents__link toc-highlight">Investigation 3: Using Playbook to configure an OPS445 Linux VM machine</a></li><li><a href="#lab-8-sign-off-show-instructor" class="table-of-contents__link toc-highlight">Lab 8 Sign-off (Show Instructor)</a><ul><li><a href="#have-the-following-items-ready-to-show-your-instructor" class="table-of-contents__link toc-highlight">Have the following items ready to show your instructor:</a></li><li><a href="#upload-the-following-files-to-blackboard" class="table-of-contents__link toc-highlight">Upload the following files to blackboard</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">OPS445 - Open System Automation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/OPS445/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Seneca College.</div></div></div></footer></div>
<script src="/OPS445/assets/js/runtime~main.6aca4582.js"></script>
<script src="/OPS445/assets/js/main.6067282e.js"></script>
</body>
</html>